(function(a){'use strict';var b=0,c=5,d=0.5,f=function(m,n){return null===m||m===void 0||0===m.length||n&&''===a.trim(m)},g=function(m,n){m.removeClass(n).addClass(n)},h=function(m,n,o){var p=f(m.data(n))?m.attr(n):m.data(n);return p?p:o[n]},j=function(m){var n=(''+m).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return n?Math.max(0,(n[1]?n[1].length:0)-(n[2]?+n[2]:0)):0},k=function(m,n){return parseFloat(m.toFixed(n))},l=function(m,n){this.$element=a(m),this.init(n)};l.prototype={constructor:l,_parseAttr:function(m,n){var o=this,p=o.$element;if('range'===p.attr('type')||'number'===p.attr('type')){var r,s,q=h(p,m,n);return r='min'===m?b:'max'===m?c:d,s=f(q)?r:q,parseFloat(s)}return parseFloat(n[m])},listenClick:function(m,n){m.on('click touchstart',function(o){return o.stopPropagation(),o.preventDefault(),!0!==o.handled&&void(n(o),o.handled=!0)})},setDefault:function(m,n){var o=this;f(o[m])&&(o[m]=n)},getPosition:function(m){var n=m.pageX||m.originalEvent.touches[0].pageX;return n-this.$rating.offset().left},listen:function(){var n,o,m=this;m.initTouch(),m.listenClick(m.$rating,function(p){return!m.inactive&&void(n=m.getPosition(p),m.setStars(n),m.$element.trigger('change').trigger('rating.change',[m.$element.val(),m.$caption.html()]),m.starClicked=!0)}),m.$rating.on('mousemove',function(p){!m.hoverEnabled||m.inactive||(m.starClicked=!1,n=m.getPosition(p),o=m.calculate(n),m.toggleHover(o),m.$element.trigger('rating.hover',[o.val,o.caption,'stars']))}),m.$rating.on('mouseleave',function(){!m.hoverEnabled||m.inactive||m.starClicked||(o=m.cache,m.toggleHover(o),m.$element.trigger('rating.hoverleave',['stars']))}),m.$clear.on('mousemove',function(){if(m.hoverEnabled&&!m.inactive&&m.hoverOnClear){m.clearClicked=!1;var p='<span class="'+m.clearCaptionClass+'">'+m.clearCaption+'</span>',q=m.clearValue,r=m.getWidthFromValue(q);o={caption:p,width:r,val:q},m.toggleHover(o),m.$element.trigger('rating.hover',[q,p,'clear'])}}),m.$clear.on('mouseleave',function(){!m.hoverEnabled||m.inactive||m.clearClicked||!m.hoverOnClear||(o=m.cache,m.toggleHover(o),m.$element.trigger('rating.hoverleave',['clear']))}),m.listenClick(m.$clear,function(){m.inactive||(m.clear(),m.clearClicked=!0)}),a(m.$element[0].form).on('reset',function(){m.inactive||m.reset()})},destroy:function(){var m=this,n=m.$element;f(m.$container)||m.$container.before(n).remove(),a.removeData(n.get(0)),n.off('rating').removeClass('hide')},create:function(m){var n=this,o=n.$element;m=m||n.options||{},n.destroy(),o.rating(m)},setTouch:function(m,n){var o=this,p='ontouchstart'in window||window.DocumentTouch&&document instanceof window.DocumentTouch;if(p&&!o.inactive){var q=m.originalEvent,r=q.touches||q.changedTouches,s=o.getPosition(r[0]);if(n)o.setStars(s),o.$element.trigger('change').trigger('rating.change',[o.$element.val(),o.$caption.html()]),o.starClicked=!0;else{var t=o.calculate(s),u=t.val<=o.clearValue?o.fetchCaption(o.clearValue):t.caption,v=o.getWidthFromValue(o.clearValue),x=t.val<=o.clearValue?o.rtl?100-v+'%':v+'%':t.width;o.$caption.html(u),o.$stars.css('width',x)}}},initTouch:function(){var m=this;m.$rating.on('touchstart touchmove touchend',function(n){var o='touchend'===n.type;m.setTouch(n,o)})},initSlider:function(m){var n=this;f(n.$element.val())&&n.$element.val(0),n.initialValue=n.$element.val(),n.setDefault('min',n._parseAttr('min',m)),n.setDefault('max',n._parseAttr('max',m)),n.setDefault('step',n._parseAttr('step',m)),(isNaN(n.min)||f(n.min))&&(n.min=b),(isNaN(n.max)||f(n.max))&&(n.max=c),(isNaN(n.step)||f(n.step)||0===n.step)&&(n.step=d),n.diff=n.max-n.min},init:function(m){var p,q,r,n=this,o=n.$element;n.options=m,a.each(m,function(s,t){n[s]=t}),n.starClicked=!1,n.clearClicked=!1,n.initSlider(m),n.checkDisabled(),n.setDefault('rtl',o.attr('dir')),n.rtl&&o.attr('dir','rtl'),p=n.glyphicon?'\uE006':'\u2605',n.setDefault('symbol',p),n.setDefault('clearButtonBaseClass','clear-rating'),n.setDefault('clearButtonActiveClass','clear-rating-active'),n.setDefault('clearValue',n.min),g(o,'form-control hide'),n.$clearElement=f(m.clearElement)?null:a(m.clearElement),n.$captionElement=f(m.captionElement)?null:a(m.captionElement),n.$rating===void 0&&n.$container===void 0&&(n.$rating=a(document.createElement('div')).html('<div class="rating-stars"></div>'),n.$container=a(document.createElement('div')),n.$container.before(n.$rating).append(n.$rating),o.before(n.$container).appendTo(n.$rating)),n.$stars=n.$rating.find('.rating-stars'),n.generateRating(),n.$clear=f(n.$clearElement)?n.$container.find('.'+n.clearButtonBaseClass):n.$clearElement,n.$caption=f(n.$captionElement)?n.$container.find('.caption'):n.$captionElement,n.setStars(),n.listen(),n.showClear&&n.$clear.attr({'class':n.getClearClass()}),q=o.val(),r=n.getWidthFromValue(q),n.cache={caption:n.$caption.html(),width:(n.rtl?100-r:r)+'%',val:q},o.removeClass('rating-loading')},checkDisabled:function(){var m=this;m.disabled=h(m.$element,'disabled',m.options),m.readonly=h(m.$element,'readonly',m.options),m.inactive=m.disabled||m.readonly},getClearClass:function(){return this.clearButtonBaseClass+' '+(this.inactive?'':this.clearButtonActiveClass)},generateRating:function(){var m=this,n=m.renderClear(),o=m.renderCaption(),p=m.rtl?'rating-container-rtl':'rating-container',q=m.getStars();p+=m.glyphicon?('\uE006'===m.symbol?' rating-gly-star':' rating-gly')+m.ratingClass:f(m.ratingClass)?' rating-uni':' '+m.ratingClass,m.$rating.attr('class',p),m.$rating.attr('data-content',q),m.$stars.attr('data-content',q),p=m.rtl?'star-rating-rtl':'star-rating',m.$container.attr('class',p+' rating-'+m.size),m.$container.removeClass('rating-active rating-disabled'),m.inactive?m.$container.addClass('rating-disabled'):m.$container.addClass('rating-active'),f(m.$caption)&&(m.rtl?m.$container.prepend(o):m.$container.append(o)),f(m.$clear)&&(m.rtl?m.$container.append(n):m.$container.prepend(n)),f(m.containerClass)||g(m.$container,m.containerClass)},getStars:function(){var p,m=this,n=m.stars,o='';for(p=1;p<=n;p++)o+=m.symbol;return o},renderClear:function(){var n,m=this;return m.showClear?(n=m.getClearClass(),f(m.$clearElement)?'<div class="'+n+'" title="'+m.clearButtonTitle+'">'+m.clearButton+'</div>':(g(m.$clearElement,n),m.$clearElement.attr({title:m.clearButtonTitle}).html(m.clearButton),'')):''},renderCaption:function(){var o,m=this,n=m.$element.val();return m.showCaption?(o=m.fetchCaption(n),f(m.$captionElement)?'<div class="caption">'+o+'</div>':(g(m.$captionElement,'caption'),m.$captionElement.html(o),'')):''},fetchCaption:function(m){var p,q,r,s,v,n=this,o=parseFloat(m),t=n.starCaptions,u=n.starCaptionClasses;return s='function'==typeof u?u(o):u[o],r='function'==typeof t?t(o):t[o],q=f(r)?n.defaultCaption.replace(/\{rating\}/g,o):r,p=f(s)?n.clearCaptionClass:s,v=o===n.clearValue?n.clearCaption:q,'<span class="'+p+'">'+v+'</span>'},getWidthFromValue:function(m){var n=this,o=n.min,p=n.max;return m<=o||o===p?0:m>=p?100:100*(m-o)/(p-o)},getValueFromPosition:function(m){var p,q,n=this,o=j(n.step),r=n.$rating.width();return q=n.diff*m/(r*n.step),q=n.rtl?Math.floor(q):Math.ceil(q),p=k(parseFloat(n.min+q*n.step),o),p=Math.max(Math.min(p,n.max),n.min),n.rtl?n.max-p:p},toggleHover:function(m){var o,p,q,n=this;n.hoverChangeCaption&&(q=m.val<=n.clearValue?n.fetchCaption(n.clearValue):m.caption,n.$caption.html(q)),n.hoverChangeStars&&(o=n.getWidthFromValue(n.clearValue),p=m.val<=n.clearValue?n.rtl?100-o+'%':o+'%':m.width,n.$stars.css('width',p))},calculate:function(m){var n=this,o=f(n.$element.val())?0:n.$element.val(),p=arguments.length?n.getValueFromPosition(m):o,q=n.fetchCaption(p),r=n.getWidthFromValue(p);return n.rtl&&(r=100-r),r+='%',{caption:q,width:r,val:p}},setStars:function(m){var n=this,o=arguments.length?n.calculate(m):n.calculate();n.$element.val(o.val),n.$stars.css('width',o.width),n.$caption.html(o.caption),n.cache=o},clear:function(){var m=this,n='<span class="'+m.clearCaptionClass+'">'+m.clearCaption+'</span>';m.$stars.removeClass('rated'),m.inactive||m.$caption.html(n),m.$element.val(m.clearValue),m.setStars(),m.$element.trigger('rating.clear')},reset:function(){var m=this;m.$element.val(m.initialValue),m.setStars(),m.$element.trigger('rating.reset')},update:function(m){var n=this;arguments.length&&(n.$element.val(m),n.setStars())},refresh:function(m){var n=this;arguments.length&&(n.$rating.off('rating'),n.$clear!==void 0&&n.$clear.off(),n.init(a.extend(n.options,m)),n.showClear?n.$clear.show():n.$clear.hide(),n.showCaption?n.$caption.show():n.$caption.hide(),n.$element.trigger('rating.refresh'))}},a.fn.rating=function(m){var n=Array.apply(null,arguments);return n.shift(),this.each(function(){var o=a(this),p=o.data('rating');p||o.data('rating',p=new l(this,a.extend({},a.fn.rating.defaults,'object'==typeof m&&m,a(this).data()))),'string'==typeof m&&p[m].apply(p,n)})},a.fn.rating.defaults={stars:5,glyphicon:!0,symbol:null,ratingClass:'',disabled:!1,readonly:!1,rtl:!1,size:'md',showClear:!0,showCaption:!0,defaultCaption:'{rating} Stars',starCaptions:{1:'Bad',2:'Bored',3:'Fine',4:'Like this',5:'Excellent','0.5':'Very Bad','1.5':'Very Bored','2.5':'Fine','3.5':'Good','4.5':'Amazing'},starCaptionClasses:{1:'label label-danger',2:'label label-warning',3:'label label-info',4:'label label-primary',5:'label label-success','0.5':'label label-danger','1.5':'label label-warning','2.5':'label label-info','3.5':'label label-primary','4.5':'label label-success'},clearButton:'<i class="fa fa-close"></i>',clearButtonTitle:'Clear',clearButtonBaseClass:'clear-rating',clearButtonActiveClass:'clear-rating-active',clearCaption:'Not Rated',clearCaptionClass:'label label-default',clearValue:null,captionElement:null,clearElement:null,containerClass:null,hoverEnabled:!0,hoverChangeCaption:!0,hoverChangeStars:!0,hoverOnClear:!0},a.fn.rating.Constructor=l,a('input.rating').addClass('rating-loading'),a(document).ready(function(){var m=a('input.rating'),n=Object.keys(m).length;0<n&&m.rating()})})(window.jQuery);